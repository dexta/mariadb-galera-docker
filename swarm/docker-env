#!/bin/bash

if [ ! -f $DOCKER_CERT_PATH/cert.pem ]; then
  echo
  echo "Can't find the api-certs required to connect to the swarm manager api!"
  echo "Please ensure that the following certificates exist in the specified docker-host-cert-path folder:"
  echo 
  echo "ca.pem"
  echo "cert.pem"
  echo "key.pem"
  echo
  echo "Note: These are generated by cluster-builder during CE swarm creation, or downloaded through the EE UCP."
  echo
  exit 1
fi

if [ -z $DOCKER_HOST ]; then 
  echo 
  echo "DOCKER_HOST is not set"
  echo "Make sure to set the DOCKER_HOST env variable to your swarm manager."
  exit 1
fi

export DOCKER_TLS_VERIFY=1

docker $@

